---
title: "Server-to-Server UPI Intent Integration"
description: "Enable direct UPI payments without redirection using EximPe‚Äôs server-to-server UPI intent flow"
---

<Note>
  The Server-to-Server (S2S) UPI Intent integration eliminates redirection hops by initiating transactions from your backend. Deliver a seamless checkout experience while maintaining control and confidence for your customers.
</Note>

<CardGroup cols={3}>
  <Card title="No Redirect Hops" icon="arrow-right" href="#step-1-initiate-payment">
    Initiate transactions directly from your server to improve user experience
  </Card>
  <Card title="Flexible Intent Invocation" icon="phone" href="#step-2-invoke-upi-intent">
    Support both generic and app-specific UPI intents on mobile web and Android apps
  </Card>
  <Card title="Robust Server Callbacks" icon="server" href="#step-4-server-to-server-callback">
    Receive asynchronous status updates via server-to-server callbacks
  </Card>
</CardGroup>

## Prerequisites

Before you begin, ensure you have:

- **Merchant Key & Salt**: Your EximPe merchant key and salt for hash generation.  
- **Callback URL**: A publicly accessible URL configured in your EximPe dashboard for server-to-server callbacks.  
- **cURL or HTTP Client**: Capability to make HTTPS `POST` and `GET` requests from your server.  
- **UPI Knowledge**: Familiarity with UPI intent URL parameters and encoding.

## Integration Steps

The integration consists of four steps:

1. **Initiate Payment**  
2. **Invoke UPI Intent**  
3. **Check Transaction Status**  
4. **Server-to-Server Callback**

---

### Step 1: Initiate Payment

Make a server-to-server `POST` to create a UPI intent transaction:

<CodeGroup>

```bash cURL
curl -X POST https://api.eximpe.com/payment/s2s/upi \
  -H "Content-Type: application/json" \
  -H "X-Client-Key: YOUR_CLIENT_KEY" \
  -d '{
    "key": "YOUR_MERCHANT_KEY",
    "txnid": "TXN123456",
    "amount": "1000.00",
    "productinfo": "Order Description",
    "firstname": "John",
    "email": "john.doe@example.com",
    "phone": "9876543210",
    "pg": "UPI",
    "bankcode": "INTENT",
    "txn_s2s_flow": 4,
    "s2s_client_ip": "203.0.113.5",
    "s2s_device_info": "Mozilla/5.0...",
    "upiAppName": "googlepay",
    "hash": "COMPUTED_SHA512_HASH"
}'

| Parameter         | Type    | Required | Description                                                                               |
| ----------------- | ------- | -------- | ----------------------------------------------------------------------------------------- |
| `key`             | string  | Yes      | Your EximPe merchant key                                                                  |
| `txnid`           | string  | Yes      | Unique merchant transaction ID (‚â§50 chars; alphanumeric, excluding `><=:&'`)              |
| `amount`          | string  | Yes      | Transaction amount in INR (two decimals; ‚â•1.00)                                           |
| `productinfo`     | string  | Yes      | Product or order description (max 100 chars)                                              |
| `firstname`       | string  | Yes      | Customer first name (max 60 chars)                                                        |
| `email`           | string  | Yes      | Customer email ID                                                                         |
| `phone`           | string  | Yes      | Customer phone number (10 digits)                                                         |
| `pg`              | string  | Yes      | Payment gateway; set to `"UPI"`                                                           |
| `bankcode`        | string  | Yes      | Set to `"INTENT"` for UPI intent flow                                                     |
| `txn_s2s_flow`    | integer | Yes      | Must be `4`                                                                               |
| `s2s_client_ip`   | string  | Yes      | Source IP address of the client device                                                    |
| `s2s_device_info` | string  | Yes      | User agent string of the client device                                                    |
| `upiAppName`      | string  | Yes      | For specific intent, name of the chosen UPI app (e.g., `phonepe`, `googlepay`)            |
| `hash`            | string  | Yes      | SHA-512 hash of concatenated params + salt (prevents tampering)                           |
| *(Optional)*      |         |          | Address (`address1`‚Äì`address2`, `city`, `state`, `country`, `zipcode`) and `udf1`‚Äì`udf5`  |

<Note> For full details on optional parameters, see the [UPI Collection ‚Äì S2S API Reference](https://docs.payu.in/reference/_payment_s2s_upi_collection). :contentReference[oaicite:15]{index=15} </Note>

Mobile Web
Construct a UPI intent URL with these required args: pa, pn, cu, tr:

Generic Intent (opens app picker):

perl
Copy
Edit
upi://pay?pa=merchant@bank&pn=Merchant%20Name&am=100.00&cu=INR&tr=TXN12345&tn=Order%20Payment
Specific App Intent (Google Pay):

perl
Copy
Edit
gpay://upi/pay?pa=merchant@bank&pn=Merchant%20Name&tr=TXN12345&tid=TXNID98765&am=100.00&cu=INR&tn=Order%20Payment
All values must be URL-encoded (spaces ‚Üí %20, etc.) 

Android App
<CodeGroup>
java
Copy
Edit
// Example: Launch Google Pay
Uri uri = new Uri.Builder()
    .scheme("upi")
    .authority("pay")
    .appendQueryParameter("pa", "merchant@bank")
    .appendQueryParameter("pn", "Merchant Name")
    .appendQueryParameter("tr", "TXN12345")
    .appendQueryParameter("am", "100.00")
    .appendQueryParameter("cu", "INR")
    .build();

Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(uri);
intent.setPackage("com.google.android.apps.nbu.paisa.user");
startActivityForResult(intent, GOOGLE_PAY_REQUEST_CODE);
</CodeGroup>
Step 3: Check Transaction Status
Poll the Verify Payment API for the UPI status:

<CodeGroup>
bash
Copy
Edit
curl -X GET https://api.eximpe.com/payment/verify/TXN123456 \
  -H "Authorization: Bearer YOUR_API_KEY"
</CodeGroup> <Note> A `"success"` status confirms completion. Always verify before fulfilling orders. :contentReference[oaicite:17]{index=17} </Note>
Step 4: Server-to-Server Callback
EximPe will asynchronously POST updates to your configured callback URL:

<CodeGroup>
plaintext
Copy
Edit
unmappedstatus=success&phone=9999999999&txnid=TXN123456&status=success
&mihpayid=175477248&amount=1000.00&productinfo=Order&firstname=John
&email=john.doe@example.com&hash=CALCULATED_HASH&...
</CodeGroup> <Warning> Always recompute and verify the `hash` on callback before updating your system to prevent tampering. :contentReference[oaicite:18]{index=18} </Warning>
Security Notes
<CardGroup cols={2}> <Card title="Validate Hash"> Recompute the SHA-512 hash of response params with your salt and compare it to `hash`. </Card> <Card title="Webhook Verification"> Secure your callback endpoint and verify payload authenticity before processing. </Card> <Card title="Reconciliation"> Regularly reconcile transactions using the Verify Payment API. </Card> <Card title="Sensitive Data"> Never expose your merchant `salt` or raw `hash` on the client side. </Card> </CardGroup>
Need Help?
<CardGroup cols={2}> <Card title="Contact Support" icon="mail" href="mailto:support@eximpe.com"> üì© Email: [support@eximpe.com](mailto:support@eximpe.com) ‚è∞ 24√ó7 Support | Response within 1 business day </Card> <Card title="Developer Docs" icon="book-open" href="https://docs.payu.in/reference/_payment_s2s_upi_collection"> üìö UPI Collection ‚Äì S2S API Reference üíª Verify Payment & Callback Guides </Card> </CardGroup> ```