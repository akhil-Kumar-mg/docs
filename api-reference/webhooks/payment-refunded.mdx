---
title: "PAYMENT_REFUNDED Webhook"
description: "Technical reference for the PAYMENT_REFUNDED webhook event, including payload schema, field specifications, and implementation details."
---

## üìã Event Overview

**Event Type**: `PAYMENT_REFUNDED`  
**Category**: Payment  
**Description**: Payment has been refunded

This webhook is triggered when a payment is refunded to the customer through EximPe.

## üìä Payload Schema

```json
{
    "event_type": "PAYMENT_REFUNDED",
    "event_time": "2024-02-15 16:53:15",
    "version": "1.0",
    "data": {
        "refunds": [
            {
                "payment_request_id": "PR7485664995",
                "order_id": "OD6085456489",
                "amount": 1000,
                "bank_arn": null
            }
        ]
    }
}
```

## üîç Field Specifications

| **Field** | **Type** | **Required** | **Description** |
|-----------|----------|--------------|-----------------|
| `event_type` | `string` | ‚úÖ | Always `"PAYMENT_REFUNDED"` |
| `event_time` | `string` | ‚úÖ | Timestamp when the event occurred |
| `version` | `string` | ‚úÖ | Webhook payload version (currently "1.0") |
| `data.refunds` | `array` | ‚úÖ | Array of refund objects |
| `data.refunds[].payment_request_id` | `string` | ‚úÖ | Original payment request ID |
| `data.refunds[].order_id` | `string` | ‚úÖ | Order ID |
| `data.refunds[].amount` | `number` | ‚úÖ | Refund amount |
| `data.refunds[].bank_arn` | `string` | ‚ùå | Bank ARN (Acquirer Reference Number) |

## üõ†Ô∏è Implementation Examples

### JavaScript/Node.js

```javascript
app.post('/webhook', (req, res) => {
    const { event_type, data } = req.body;
    
    if (event_type === 'PAYMENT_REFUNDED') {
        const { refunds } = data;
        
        refunds.forEach(async (refund) => {
            const { payment_request_id, order_id, amount, bank_arn } = refund;
            
            // Update order status
            await updateOrderStatus(order_id, 'refunded');
            
            // Send refund notification
            await sendRefundNotification(order_id, amount);
            
            // Log refund
            await logRefund({ payment_id: payment_request_id, order_id, amount });
        });
    }
    
    res.status(200).send('OK');
});
```

## üìã Business Logic Recommendations

1. **Update Order Status** - Mark order as refunded
2. **Notify Customer** - Send refund confirmation
3. **Restore Inventory** - If applicable
4. **Update Accounting** - Create refund entries
5. **Log for Analytics** - Track refund events

## ‚ö†Ô∏è Important Notes

- **Idempotency**: Handle duplicate webhooks
- **Multiple Refunds**: Process all refunds in the array
- **Bank ARN**: May be null for some refund types
- **Verification**: Always verify webhook signature

For technical support, contact [engineering@eximpe.com](mailto:engineering@eximpe.com). 