{
  "openapi": "3.0.0",
  "info": {
    "title": "Eximpe Payment Gateway API",
    "description": "API for payment processing and order management through Eximpe payment gateway",
    "license": {
      "name": "Proprietary"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://api.eximpe.com",
      "description": "Production server"
    }
  ],
  "security": [
    {
      "clientAuth": [],
      "clientSecretAuth": []
    }
  ],
  "paths": {
    "/pg/orders": {
      "post": {
        "summary": "Create Order",
        "description": "Create a new order for payment processing.",
        "tags": ["Orders"],
        "security": [
          {
            "clientAuth": [],
            "clientSecretAuth": []
          }
        ],
        "requestBody": {
          "description": "Order creation request",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOrderRequest"
              },
              "example": {
                "amount": "100.00",
                "currency": "INR",
                "reference_id": "order_123456",
                "return_url": "https://your-website.com/payment-success",
                "mop_type": "UPI",
                "buyer": {
                  "name": "John Doe",
                  "email": "john.doe@example.com",
                  "phone": "+919876543210",
                  "address": {
                    "line_1": "123 Main Street",
                    "line_2": "Apartment 4B",
                    "city": "Mumbai",
                    "state": "Maharashtra",
                    "postal_code": "400001"
                  }
                },
                "product": {
                  "name": "Premium Subscription",
                  "description": "Monthly premium subscription plan",
                  "hs_code": "85287200",
                  "hs_code_description": "Digital content and services",
                  "type_of_goods": "goods"
                },
                "invoice": {
                  "number": "INV-2024-001",
                  "date": "2024-01-15"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Order created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateOrderResponse"
                },
                "example": {
                  "success": true,
                  "message": "Order created successfully",
                  "data": {
                    "session_id": "session_abc123def456",
                    "order_id": "order_xyz789uvw012"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid request parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "success": false,
                  "message": "Invalid request parameters",
                  "error": {
                    "code": "ERR_ORDER_002",
                    "message": "Required field 'amount' is missing",
                    "details": {
                      "field": "amount",
                      "reason": "Field is required but not provided"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/merchant/payments/{payment_id}/": {
      "get": {
        "summary": "Get Payment",
        "description": "Retrieve the details of a specific payment by its ID.",
        "tags": [
          "Payments"
        ],
        "security": [
          {
            "clientAuth": [],
            "clientSecretAuth": []
          }
        ],
        "parameters": [
          {
            "name": "payment_id",
            "in": "path",
            "description": "The ID of the payment to retrieve.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The details of the payment.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetPaymentResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid credentials.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Payment not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CreateOrderRequest": {
        "type": "object",
        "required": ["amount", "currency", "reference_id", "buyer", "product"],
        "properties": {
          "amount": {
            "type": "string",
            "description": "Amount in decimal format (e.g., \"100.00\")",
            "pattern": "^\\d+\\.\\d{2}$"
          },
          "currency": {
            "type": "string",
            "description": "3-letter ISO currency code (e.g., INR, USD)",
            "pattern": "^[A-Z]{3}$"
          },
          "reference_id": {
            "type": "string",
            "description": "Unique identifier for the order"
          },
          "return_url": {
            "type": "string",
            "format": "uri",
            "description": "URL to redirect after payment"
          },
          "mop_type": {
            "type": "string",
            "description": "Method of payment type (e.g., UPI)",
            "enum": ["UPI", "CARD", "NETBANKING", "WALLET"]
          },
          "buyer": {
            "$ref": "#/components/schemas/Buyer"
          },
          "product": {
            "$ref": "#/components/schemas/Product"
          },
          "invoice": {
            "$ref": "#/components/schemas/Invoice"
          }
        }
      },
      "Buyer": {
        "type": "object",
        "required": ["name", "address"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Buyer's full name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Buyer's email address"
          },
          "phone": {
            "type": "string",
            "description": "Buyer's phone number with country code",
            "pattern": "^\\+[1-9]\\d{1,14}$"
          },
          "address": {
            "$ref": "#/components/schemas/Address"
          }
        }
      },
      "Address": {
        "type": "object",
        "required": ["line_1", "city", "state", "postal_code"],
        "properties": {
          "line_1": {
            "type": "string",
            "description": "Address line 1"
          },
          "line_2": {
            "type": "string",
            "description": "Address line 2"
          },
          "city": {
            "type": "string",
            "description": "City name"
          },
          "state": {
            "type": "string",
            "description": "State name"
          },
          "postal_code": {
            "type": "string",
            "description": "Postal/ZIP code"
          }
        }
      },
      "Product": {
        "type": "object",
        "required": ["name", "type_of_goods"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Product name"
          },
          "description": {
            "type": "string",
            "description": "Product description"
          },
          "hs_code": {
            "type": "string",
            "description": "Harmonized System code"
          },
          "hs_code_description": {
            "type": "string",
            "description": "Description of the HS code"
          },
          "type_of_goods": {
            "type": "string",
            "description": "Type of goods (e.g., goods)",
            "enum": ["goods", "services"]
          }
        }
      },
      "Invoice": {
        "type": "object",
        "properties": {
          "number": {
            "type": "string",
            "description": "Invoice number"
          },
          "date": {
            "type": "string",
            "format": "date",
            "description": "Invoice date in YYYY-MM-DD format"
          }
        }
      },
      "CreateOrderResponse": {
        "type": "object",
        "required": ["success", "message", "data"],
        "properties": {
          "success": {
            "type": "boolean",
            "description": "Indicates if the request was successful"
          },
          "message": {
            "type": "string",
            "description": "Response message"
          },
          "data": {
            "$ref": "#/components/schemas/OrderData"
          }
        }
      },
      "OrderData": {
        "type": "object",
        "required": ["session_id", "order_id"],
        "properties": {
          "session_id": {
            "type": "string",
            "description": "Unique session identifier for payment processing"
          },
          "order_id": {
            "type": "string",
            "description": "Unique order identifier"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": ["success", "message"],
        "properties": {
          "success": {
            "type": "boolean",
            "description": "Indicates if the request was successful"
          },
          "message": {
            "type": "string",
            "description": "Response message"
          },
          "error": {
            "$ref": "#/components/schemas/ErrorDetails"
          }
        }
      },
      "ErrorDetails": {
        "type": "object",
        "required": ["code", "message"],
        "properties": {
          "code": {
            "type": "string",
            "description": "Error code (e.g., ERR_ORDER_002)"
          },
          "message": {
            "type": "string",
            "description": "Error message"
          },
          "details": {
            "type": "object",
            "description": "Detailed error information",
            "properties": {
              "field": {
                "type": "string",
                "description": "Field that caused the error"
              },
              "reason": {
                "type": "string",
                "description": "Reason for the error"
              }
            }
          }
        }
      },
      "GetPaymentResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "message": {
            "type": "string"
          },
          "data": {
            "$ref": "#/components/schemas/PaymentDetails"
          }
        }
      },
      "PaymentDetails": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "order_details": {
            "$ref": "#/components/schemas/PaymentOrderDetails"
          },
          "settlement_details": {
            "type": "object",
            "nullable": true
          },
          "refund_details": {
            "type": "array",
            "items": {}
          },
          "payment_gateway": {
            "type": "string"
          },
          "collection_mode": {
            "type": "string"
          },
          "txn_type": {
            "type": "string"
          },
          "mop_type": {
            "type": "string"
          },
          "return_url": {
            "type": "string",
            "format": "uri"
          },
          "expires_day": {
            "type": "integer",
            "nullable": true
          },
          "expires_hour": {
            "type": "integer",
            "nullable": true
          },
          "is_expired": {
            "type": "boolean"
          },
          "transaction_id": {
            "type": "string"
          },
          "bank_ref_num": {
            "type": "string"
          },
          "auth_code": {
            "type": "string",
            "nullable": true
          },
          "card_mask": {
            "type": "string",
            "nullable": true
          },
          "rrn": {
            "type": "string",
            "nullable": true
          },
          "card_holder_name": {
            "type": "string",
            "nullable": true
          },
          "card_issuer_country": {
            "type": "string",
            "nullable": true
          },
          "card_issuer_bank": {
            "type": "string",
            "nullable": true
          },
          "acq_id": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "string"
          },
          "payment_link": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "status_message": {
            "type": "string",
            "nullable": true
          },
          "is_status_final": {
            "type": "boolean"
          },
          "is_active": {
            "type": "boolean"
          },
          "fees": {
            "type": "number",
            "format": "float"
          },
          "taxes_on_fees": {
            "type": "number",
            "format": "float"
          },
          "created_date": {
            "type": "string",
            "format": "date-time"
          },
          "bank_account": {
            "type": "string"
          },
          "payment_settlement_status": {
            "type": "string"
          }
        }
      },
      "PaymentOrderDetails": {
        "type": "object",
        "properties": {
          "order_id": {
            "type": "string"
          },
          "reference_id": {
            "type": "string"
          },
          "amount": {
            "type": "number",
            "format": "float"
          },
          "currency": {
            "type": "string"
          },
          "return_url": {
            "type": "string",
            "format": "uri"
          },
          "mop_type": {
            "type": "string"
          },
          "buyer": {
            "$ref": "#/components/schemas/PaymentBuyer"
          },
          "product": {
            "$ref": "#/components/schemas/Product"
          },
          "invoice": {
            "$ref": "#/components/schemas/Invoice"
          },
          "air_waybills": {
            "type": "array",
            "items": {}
          },
          "payment_requests": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaymentRequest"
            }
          },
          "status": {
            "type": "string"
          },
          "status_message": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "is_testing": {
            "type": "boolean"
          },
          "is_active": {
            "type": "boolean"
          }
        }
      },
      "PaymentBuyer": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Buyer"
          },
          {
            "type": "object",
            "properties": {
              "pan_number": {
                "type": "string"
              },
              "date_of_birth": {
                "type": "string",
                "format": "date"
              }
            }
          }
        ]
      },
      "PaymentRequest": {
        "type": "object",
        "properties": {
          "payment_id": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "payment_link": {
            "type": "string",
            "format": "uri",
            "nullable": true
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "mop_type": {
            "type": "string"
          },
          "collection_mode": {
            "type": "string"
          },
          "status_message": {
            "type": "string",
            "nullable": true
          }
        }
      }
    },
    "securitySchemes": {
      "clientAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-Client-Id",
        "description": "Your API client ID"
      },
      "clientSecretAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-Client-Secret",
        "description": "Your API client secret"
      }
    }
  }
}